(()=>{"use strict";class e{constructor(){this.notes=["Организация признана в России террористической, запрещена на территории РФ.","Организация признана в России экстремистской, запрещена на территории РФ.","Организация, ранее выполнявшая функции иностранного агента, признана в России экстремистской, запрещена на территории РФ.","Организация или физическое лицо, выполняющее функции иностранного агента."],this.codes=["terrorist","t","extremist","e","exino","ei","ino","i"]}numeric(e){switch(e){case"terrorist":case"t":return 1;case"extremist":case"e":return 2;case"exino":case"ei":return 3;case"ino":case"i":return 4}}intextNote(e){let t=this.numeric(e);return t?`<sup>${t}</sup>`:""}footerNote(e){let t=this.numeric(e);if(t)return`<p class="footer-note"><sup>${t}</sup> ${this.notes[t-1]}</p>`}}class t{constructor(){this.footnotes=[],this.result="",this.legalNotes=new e}replace(e){this.result=e;for(let e of this.legalNotes.codes){let t=new RegExp(`{${e}}`,"g");this.result.search(t)>0&&(this.footnotes.push(this.legalNotes.footerNote(e)),this.result=this.result.replace(t,this.legalNotes.intextNote(e)))}}clear(){this.footnotes=[],this.result=""}addNotesToFooter(){document.querySelector(".footer").insertAdjacentHTML("beforeend",'<section class="footer-notes"></section>');for(let e of this.footnotes)document.querySelector(".footer-notes").insertAdjacentHTML("beforeend",e)}}function s(e,t){if(!document.getElementsByTagName(e)[0]){let s=document.createElement(e);document.getElementsByTagName(t)[0].appendChild(s)}}class r{constructor(){this.LCR=new t}prepareData(){this.data=function(e){let t=document.getElementById("md").innerHTML;return t=t.replace(/\.\.\./g,"…"),t=t.replace(/(^)\x22(\s)/g,"$1»$2"),t=t.replace(/(^|\s|\()"/g,"$1«"),t=t.replace(/"(\;|\!|\?|\:|\.|\,|$|\)|\{|\s)/g,"»$1"),t=t.replace(/(?<!»,) - /g," — "),t}(),this.LCR.replace(this.data),document.getElementById("md").style.display="none",document.getElementById("md").innerText="",this.data=this.LCR.result}dropFootnotes(){this.LCR.addNotesToFooter(),this.LCR.clear(),this.LCR=null}prepareStrings(){this.strings=this.data.split(/\n/g).filter((function(e){return""!=e})),this.data=void 0}pushArticle(){this.article.length>0&&(this.articles.push(`<article class="message">${this.article.join("")}</article>`),this.article=[])}parseStrings(){this.articles=[],this.article=[];let e,t=!1;for(;e=this.strings.shift();)if(e.startsWith("#{begin}"))this.article.push(e.replace("#{begin}",'<div class="messages-closed"><button class="btn-open-close">▲▼</button>'));else if(e.startsWith("#{end}"))this.article.push(e.replace("#{end}","</div>")),this.pushArticle();else if(e.startsWith("#!"))this.article.push('<div class="short">'),this.article.push(e.replace("#!","")),this.article.push("</div>"),this.pushArticle();else if(e.startsWith("##")){let s=e.replace("##",'<div class="message-tags">')+"</div>";t||0===this.article.length||this.pushArticle(),this.article.push(s),t=!1}else if(e.startsWith("#")){let s=e.replace("#",'<h2 class="message-header">')+"</h2>";0!==this.article.length&&this.pushArticle(),this.article.push(s),t=!0}else this.article.push(`<p>${e}</p>`);this.pushArticle()}show(){let e=document.createElement("section");e.innerHTML=this.articles.join(""),document.getElementById("md").insertAdjacentElement("beforebegin",e),document.getElementById("md").style.display="none"}}!function(){if(!document.getElementById("md"))return;!function(){s("title","head"),s("header","body"),s("footer","body");let e=new Date(document.getElementsByTagName("header")[0].innerHTML);document.getElementsByTagName("title")[0].innerText=new Intl.DateTimeFormat("ru-RU",{dateStyle:"short"}).format(e),document.getElementsByTagName("header")[0].outerHTML=`\n    <header class="header">\n        <h1 class="date">${function(e){return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long"}).format(e)+" "+e.getFullYear()+" года"}(e)}</h1>\n        <div class="dayofweek">${new Intl.DateTimeFormat("ru-RU",{weekday:"long"}).format(e)}</div>\n    </header>`,document.getElementsByTagName("footer")[0].outerHTML=`<footer class="footer">\n    <p class="footer-links">\n        <a href="daybyday.html" class="footer-link">День за днём</a>\n    </p>\n    <p class="footer-credits">${document.getElementsByTagName("footer")[0].innerHTML}</p>\n    </footer>`}();let e=new r;e.prepareData(),e.dropFootnotes(),e.prepareStrings(),e.parseStrings(),e.show()}(),document.querySelectorAll(".btn-open-close").forEach((e=>{e.addEventListener("click",(()=>{e.parentNode.classList.toggle("messages-closed"),e.parentNode.classList.toggle("messages-open")}))}))})();