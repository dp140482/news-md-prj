function simpleFooter(e){return`<footer class="footer">\n    <p class="footer-links">\n        <a href="daybyday.html" class="footer-link">День за днём</a>\n    </p>\n    <p class="footer-credits">${e}</p>\n    </footer>`}function simpleHeader(e){let t=new Date(e);return`<header class="header">\n    <h1 class="date">${t.toRusString()}</h1>\n    <div class="dayofweek">${new Intl.DateTimeFormat("ru-RU",{weekday:"long"}).format(t)}</div>\n</header>`}const title=document.getElementsByTagName("title")[0],header=document.getElementsByTagName("header")[0],footer=document.getElementsByTagName("footer")[0];class LegalNotes{constructor(){this.notes=["Организация признана в России террористической, запрещена на территории РФ.","Организация признана в России экстремистской, запрещена на территории РФ.","Организация, ранее выполнявшая функции иностранного агента, признана в России экстремистской, запрещена на территории РФ.","Организация или физическое лицо, выполняющее функции иностранного агента."],this.codes=["terrorist","t","extremist","e","exino","ei","ino","i"]}numeric(e){switch(e){case"terrorist":case"t":return 1;case"extremist":case"e":return 2;case"exino":case"ei":return 3;case"ino":case"i":return 4}}intextNote(e){let t=this.numeric(e);return t?`<sup>${t}</sup>`:""}footerNote(e){let t=this.numeric(e);if(t)return`<p class="footer-notes"><sup>${t}</sup> ${this.notes[t-1]}</p>`}addFooterNote(e){document.getElementsByTagName("footer")[0].insertAdjacentHTML("beforeend",this.footerNote(e))}replaceCodes(e){let t=e;for(let e of this.codes){let r=new RegExp(`{${e}}`,"g");t.search(r)>0&&(this.addFooterNote(e),t=t.replace(r,this.intextNote(e)))}return t}}Date.prototype.toRusString=function(){return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long"}).format(this)+" "+this.getFullYear()+" года"};class ArticleBlock{constructor(){this.block=document.getElementById("md")}extractData(){let e=this.block.innerHTML;return e=e.replace(/\.\.\./g,"…"),e=e.replace(/"([^"]+)"/g,"«$1»"),e=e.replace(/(?<!»,) - /g," — ")}prepareArticles(e){function t(e){return`<article class="message">${e.join("")}</article>`}let r=e.split(/\n/g).filter(function(e){return""!=e}),s=[],o=[],n=!1;for(let e=0;e<r.length;e++)if(r[e].startsWith("##")){let a=r[e].replace("##",'<div class="message-tags">');a+="</div>",n||0===o.length||(s.push(t(o)),o=[]),o.push(a),n=!1}else if(r[e].startsWith("#")){let a=r[e].replace("#",'<h2 class="message-header">');a+="</h2>",0!==o.length&&(s.push(t(o)),o=[]),o.push(a),n=!0}else o.push(`<p>${r[e]}</p>`),n=!1;return s.push(t(o)),s}convert(){if(!this.block)return;let e=document.createElement("section"),t=this.prepareArticles((new LegalNotes).replaceCodes(this.extractData()));e.innerHTML=t.join(""),this.block.insertAdjacentElement("beforebegin",e),this.block.style.display="none"}}let date=header.innerHTML;title.innerText=new Intl.DateTimeFormat("ru-RU",{dateStyle:"short"}).format(new Date(date)),header.outerHTML=simpleHeader(date),footer.outerHTML=simpleFooter(footer.innerHTML),(new ArticleBlock).convert();